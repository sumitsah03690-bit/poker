/* ═══════════════════════════════════════════════════
   PokerChips.io — Dark Mode Design System v4
   Clean rebuild. Mobile-first. Inter + JetBrains Mono.
   ═══════════════════════════════════════════════════ */

/* ── Tokens ────────────────────────────────────── */
:root {
  --bg:        #0a0a0f;
  --bg-card:   #13131a;
  --bg-raised: #1a1a24;
  --bg-hover:  #22222e;
  --border:    #2a2a36;
  --border-hi: #3a3a4a;
  --text:      #e4e4ec;
  --text-dim:  #8888a0;
  --gold:      #f0c850;
  --gold-dim:  rgba(240,200,80,0.12);
  --gold-mid:  rgba(240,200,80,0.25);
  --blue:      #5b9cf5;
  --blue-dim:  rgba(91,156,245,0.12);
  --red:       #f06050;
  --red-dim:   rgba(240,96,80,0.12);
  --green:     #44d688;
  --green-dim: rgba(68,214,136,0.12);
  --radius:    12px;
  --radius-sm: 8px;
  --radius-xs: 6px;
  --safe-b:    env(safe-area-inset-bottom, 0px);
  --font:      'Inter', -apple-system, sans-serif;
  --mono:      'JetBrains Mono', monospace;
}

/* ── Reset ─────────────────────────────────────── */
*, *::before, *::after { box-sizing:border-box; margin:0; padding:0; }
html { -webkit-tap-highlight-color:transparent; -webkit-text-size-adjust:100%; }

body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  min-height: 100vh; min-height:100dvh;
  overflow-x: hidden;
  touch-action: manipulation;
  line-height: 1.5;
}

/* ── Layout ────────────────────────────────────── */
.app {
  max-width: 520px;
  margin: 0 auto;
  padding: 0 16px;
  padding-bottom: calc(16px + var(--safe-b));
  position: relative;
}

/* ── Views ──────────────────────────────────────── */
.view { display:none; }
.view.visible { display:block; animation: fadeUp .35s ease; }

@keyframes fadeUp {
  from { opacity:0; transform:translateY(16px); }
  to   { opacity:1; transform:translateY(0); }
}

/* ═══════════════════════════════════════════════
   HOME VIEW
   ═══════════════════════════════════════════════ */
.home-header { padding:16px 0 8px; display:flex; align-items:center; }

.brand { display:flex; align-items:center; gap:8px; }
.brand-icon {
  font-size:1.3rem; color:var(--gold);
  width:32px; height:32px;
  display:flex; align-items:center; justify-content:center;
  background:var(--gold-dim); border-radius:8px;
}
.brand-name { font-weight:700; font-size:1rem; color:var(--text); letter-spacing:-.02em; }
.brand-accent { color:var(--gold); }

/* Hero */
.hero { padding:32px 0 24px; }
.hero h1 { font-size:2.2rem; font-weight:800; line-height:1.15; letter-spacing:-.03em; }
.hero-gradient {
  background: linear-gradient(135deg, var(--gold) 20%, #f09040 100%);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  background-clip:text;
}
.hero-sub { margin-top:12px; color:var(--text-dim); font-size:.95rem; max-width:340px; }

/* Card */
.card {
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--radius); overflow:hidden;
}
.home-card { margin-bottom:32px; }

/* Tabs */
.tabs { display:flex; border-bottom:1px solid var(--border); }
.tab {
  flex:1; background:none; border:none; color:var(--text-dim);
  font-family:var(--font); font-size:.85rem; font-weight:600;
  padding:14px; cursor:pointer; position:relative;
  transition: color .15s;
}
.tab.active { color:var(--gold); }
.tab.active::after {
  content:''; position:absolute; bottom:-1px; left:20%; right:20%;
  height:2px; background:var(--gold); border-radius:2px;
}

.tab-body { padding:20px; }
.tab-body.hidden { display:none; }

/* Fields */
.field { margin-bottom:16px; }
.field label {
  display:block; font-family:var(--mono); font-size:.65rem;
  text-transform:uppercase; letter-spacing:.1em; color:var(--text-dim);
  margin-bottom:6px;
}
.field input, .field select {
  width:100%; background:var(--bg-raised); border:1px solid var(--border);
  border-radius:var(--radius-sm); color:var(--text); font-family:var(--font);
  font-size:.95rem; padding:12px 14px; outline:none;
  transition: border-color .15s;
}
.field input::placeholder { color:var(--text-dim); opacity:.5; }
.field input:focus, .field select:focus { border-color:var(--gold); }
.field select {
  appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%23f0c850'/%3E%3C/svg%3E");
  background-repeat:no-repeat; background-position:right 14px center;
}

.info-row {
  display:flex; justify-content:space-between; align-items:center;
  background:var(--gold-dim); border:1px solid var(--gold-mid);
  border-radius:var(--radius-sm); padding:10px 14px;
}
.info-label { font-family:var(--mono); font-size:.65rem; text-transform:uppercase; letter-spacing:.1em; color:var(--text-dim); }
.info-value { font-weight:700; font-size:1.1rem; color:var(--gold); }

/* Buttons */
.btn-primary {
  width:100%; padding:14px; border:none; border-radius:var(--radius-sm);
  background:var(--gold); color:#0a0a0f; font-family:var(--font);
  font-size:.9rem; font-weight:700; cursor:pointer;
  transition: opacity .15s, transform .1s;
}
.btn-primary:active { transform:scale(.98); }

.btn-ghost {
  width:100%; padding:12px; background:none;
  border:1px solid var(--border); border-radius:var(--radius-sm);
  color:var(--text-dim); font-family:var(--font); font-size:.85rem;
  cursor:pointer; margin-top:8px; transition: border-color .15s;
}
.btn-ghost:active { border-color:var(--gold); color:var(--gold); }

/* Steps */
.steps { padding:24px 0 40px; }
.steps h2 { font-size:1.2rem; font-weight:700; margin-bottom:16px; }
.steps-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.step {
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--radius-sm); padding:16px 14px;
}
.step-n {
  display:inline-block; width:24px; height:24px; line-height:24px;
  text-align:center; border-radius:6px; font-family:var(--mono);
  font-size:.7rem; font-weight:600; background:var(--gold-dim); color:var(--gold);
  margin-bottom:8px;
}
.step strong { display:block; font-size:.85rem; margin-bottom:4px; }
.step p { font-size:.75rem; color:var(--text-dim); }

footer { text-align:center; padding:16px 0; font-size:.7rem; color:var(--text-dim); border-top:1px solid var(--border); }

/* ═══════════════════════════════════════════════
   GAME VIEW
   ═══════════════════════════════════════════════ */

/* Top bar */
.game-top {
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 0;
}
.game-top-left { display:flex; align-items:center; gap:8px; }
.game-top-right { display:flex; align-items:center; gap:6px; }

.brand-mini {
  font-size:1rem; color:var(--gold); background:var(--gold-dim);
  width:28px; height:28px; border-radius:6px;
  display:flex; align-items:center; justify-content:center;
}
.hand-badge {
  font-family:var(--mono); font-size:.7rem; color:var(--text-dim);
  letter-spacing:.04em;
}

.code-pill {
  background:var(--gold-dim); border:1px solid var(--gold-mid);
  border-radius:var(--radius-xs); padding:6px 12px;
  font-family:var(--mono); font-size:.72rem; font-weight:600;
  color:var(--gold); cursor:pointer;
  transition: background .15s;
}
.code-pill:active { background:var(--gold-mid); }

.icon-btn {
  background:none; border:1px solid var(--border); border-radius:var(--radius-xs);
  color:var(--text-dim); width:32px; height:32px; cursor:pointer;
  font-size:.8rem; display:flex; align-items:center; justify-content:center;
  transition: border-color .15s;
}
.icon-btn:active { border-color:var(--red); color:var(--red); }

/* Round pills */
.rounds { display:flex; gap:4px; margin-bottom:10px; overflow-x:auto; -webkit-overflow-scrolling:touch; }
.rounds::-webkit-scrollbar { display:none; }

.rpill {
  padding:5px 10px; border-radius:20px; white-space:nowrap;
  font-family:var(--mono); font-size:.58rem; font-weight:500;
  text-transform:uppercase; letter-spacing:.06em;
  background:var(--bg-raised); color:var(--text-dim);
  border:1px solid var(--border); flex-shrink:0;
  transition: all .2s;
}
.rpill.active { background:var(--gold-dim); border-color:var(--gold); color:var(--gold); }
.rpill.done   { color:var(--text-dim); opacity:.4; }

/* Table message */
.table-msg {
  background:var(--gold-dim); border:1px solid var(--gold-mid);
  border-radius:var(--radius-sm); padding:10px 14px;
  text-align:center; font-family:var(--mono); font-size:.75rem;
  color:var(--gold); margin-bottom:10px;
  display:none;
}
.table-msg.visible { display:block; animation:fadeUp .3s ease; }

/* Stats row (pot + call) */
.stats-row {
  display:flex; align-items:center;
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--radius); margin-bottom:10px;
  overflow:hidden;
}
.stat { flex:1; text-align:center; padding:14px 8px; }
.stat-label {
  display:block; font-family:var(--mono); font-size:.55rem;
  text-transform:uppercase; letter-spacing:.12em; color:var(--text-dim);
  margin-bottom:2px;
}
.stat-value { font-size:1.8rem; font-weight:800; letter-spacing:-.02em; }
.stat-value.gold { color:var(--gold); }
.stat-value.blue { color:var(--blue); }
.stat-value.bump { animation:bump .3s ease; }
@keyframes bump { 0%,100%{transform:scale(1)} 50%{transform:scale(1.1)} }

.stat-divider { width:1px; height:40px; background:var(--border); flex-shrink:0; }

/* Activity log */
.log-toggle {
  margin-bottom:10px; background:var(--bg-card);
  border:1px solid var(--border); border-radius:var(--radius-sm);
}
.log-toggle summary {
  padding:10px 14px; font-family:var(--mono); font-size:.7rem;
  color:var(--text-dim); cursor:pointer; user-select:none;
}
.log {
  max-height:160px; overflow-y:auto; padding:0 14px 10px;
  -webkit-overflow-scrolling:touch;
}
.log::-webkit-scrollbar { width:3px; }
.log::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }

.log-row {
  display:flex; gap:6px; align-items:baseline;
  padding:3px 0; font-size:.7rem;
  border-bottom:1px solid rgba(255,255,255,.03);
}
.log-row:last-child { border-bottom:none; }
.log-t { font-family:var(--mono); font-size:.58rem; color:var(--text-dim); opacity:.5; min-width:40px; }
.log-x { color:var(--text); flex:1; }
.log-a { font-weight:600; color:var(--gold); }

/* ── Players ───────────────────────────────────── */
.players {
  display:grid; grid-template-columns:1fr 1fr;
  gap:8px; margin-bottom:10px;
}

.pcard {
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--radius-sm); padding:12px 10px;
  transition: all .2s; position:relative;
}
.pcard.folded { opacity:.35; }
.pcard.folded .fold-tag { display:block; }

.pcard-top { display:flex; align-items:center; gap:8px; margin-bottom:6px; }

.avatar {
  width:30px; height:30px; border-radius:50%;
  background:linear-gradient(135deg, var(--bg-hover), var(--gold-dim));
  display:flex; align-items:center; justify-content:center;
  font-weight:700; font-size:.85rem; color:var(--gold);
  border:1.5px solid var(--border); flex-shrink:0; position:relative;
}
.dealer-d {
  position:absolute; bottom:-3px; right:-3px;
  width:14px; height:14px; border-radius:50%;
  background:var(--gold); color:var(--bg); font-family:var(--mono);
  font-size:.4rem; font-weight:700;
  display:flex; align-items:center; justify-content:center;
}

.pname { font-weight:600; font-size:.8rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.you-tag { color:var(--gold); font-size:.6rem; font-weight:500; }

.pchips-row { display:flex; justify-content:space-between; align-items:baseline; }
.pchips-label { font-family:var(--mono); font-size:.55rem; text-transform:uppercase; letter-spacing:.06em; color:var(--text-dim); }
.pchips { font-size:1.15rem; font-weight:700; }

.pbet {
  display:inline-block; margin-top:3px; padding:2px 6px;
  background:var(--gold-dim); border:1px solid var(--gold-mid);
  border-radius:4px; font-family:var(--mono); font-size:.58rem; color:var(--gold);
}

.fold-tag {
  display:none; font-family:var(--mono); font-size:.55rem;
  text-transform:uppercase; color:var(--red); margin-top:4px;
  letter-spacing:.06em;
}

/* Debts */
.debt { margin-top:4px; border-top:1px solid var(--red-dim); padding-top:4px; }
.debt-row {
  display:flex; align-items:center; justify-content:space-between;
  background:var(--red-dim); border-radius:4px; padding:3px 6px;
  margin-bottom:2px; font-family:var(--mono); font-size:.55rem; color:var(--red);
}
.debt-collect {
  background:var(--red-dim); border:1px solid var(--red);
  border-radius:3px; color:var(--red); font-family:var(--mono);
  font-size:.5rem; padding:2px 6px; cursor:pointer;
}

.loan-btn {
  display:block; width:100%; margin-top:5px; padding:6px;
  background:var(--gold-dim); border:1px solid var(--gold-mid);
  border-radius:var(--radius-xs); color:var(--gold);
  font-family:var(--mono); font-size:.58rem; cursor:pointer;
  text-align:center; transition: background .15s;
}
.loan-btn:active { background:var(--gold-mid); }

/* ── Host controls ────────────────────────────── */
.host-bar {
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--radius-sm); padding:10px; margin-bottom:10px;
}
.host-tag {
  display:block; font-family:var(--mono); font-size:.6rem;
  text-transform:uppercase; letter-spacing:.06em; color:var(--text-dim);
  margin-bottom:8px; text-align:center;
}
.host-btns { display:grid; grid-template-columns:1fr 1fr; gap:6px; }
.host-btns button {
  padding:10px 6px; border-radius:var(--radius-xs);
  background:var(--bg-raised); border:1px solid var(--border);
  color:var(--gold); font-family:var(--mono); font-size:.65rem;
  cursor:pointer; transition: all .15s; text-align:center;
}
.host-btns button:active { background:var(--bg-hover); transform:scale(.97); }

/* ── My action bar ────────────────────────────── */
.my-actions {
  position:sticky; bottom:0; z-index:10;
  display:flex; gap:8px;
  background:rgba(10,10,15,.92);
  backdrop-filter:blur(10px);
  border-top:1px solid var(--border);
  padding:12px 0 calc(12px + var(--safe-b));
  margin:0 -16px; padding-left:16px; padding-right:16px;
}

.act {
  flex:1; padding:14px 8px; border-radius:var(--radius-sm);
  font-family:var(--font); font-size:.85rem; font-weight:700;
  cursor:pointer; border:1.5px solid; text-align:center;
  transition: all .15s;
}
.act:active { transform:scale(.95); }
.act.fold  { background:var(--red-dim);   border-color:var(--red);  color:var(--red); }
.act.call  { background:var(--blue-dim);  border-color:var(--blue); color:var(--blue); }
.act.raise { background:var(--gold-dim);  border-color:var(--gold); color:var(--gold); }

/* ── Raise sheet ──────────────────────────────── */
.raise-sheet {
  position:fixed; inset:0; z-index:50;
  background:rgba(0,0,0,.7); backdrop-filter:blur(4px);
  display:none; align-items:flex-end; justify-content:center;
}
.raise-sheet.open { display:flex; }

.raise-inner {
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--radius) var(--radius) 0 0;
  padding:20px 16px calc(20px + var(--safe-b));
  width:100%; max-width:520px;
  animation: slideUp .3s ease;
}
@keyframes slideUp { from{transform:translateY(100%)} to{transform:translateY(0)} }

.raise-header {
  display:flex; justify-content:space-between; align-items:center;
  font-size:.85rem; font-weight:600; margin-bottom:4px;
}
.raise-max { font-family:var(--mono); font-size:.7rem; color:var(--text-dim); }

.raise-big {
  text-align:center; font-size:2.2rem; font-weight:800;
  color:var(--gold); margin:12px 0;
}

.raise-quicks { display:flex; gap:6px; margin-bottom:12px; flex-wrap:wrap; justify-content:center; }
.rq {
  padding:10px 14px; border-radius:var(--radius-xs);
  font-family:var(--mono); font-size:.72rem; font-weight:600;
  background:var(--gold-dim); border:1px solid var(--gold-mid); color:var(--gold);
  cursor:pointer; transition: all .15s;
}
.rq:active { transform:scale(.94); }
.rq.minus { background:var(--red-dim); border-color:rgba(240,96,80,.3); color:var(--red); }
.rq.allin { background:var(--red-dim); border-color:var(--red); color:var(--red); }

.raise-input {
  width:100%; padding:12px 14px; margin-bottom:12px;
  background:var(--bg-raised); border:1px solid var(--border);
  border-radius:var(--radius-sm); color:var(--text);
  font-family:var(--font); font-size:.95rem; outline:none;
}
.raise-input:focus { border-color:var(--gold); }

/* ── Modals ───────────────────────────────────── */
.modal-bg {
  display:none; position:fixed; inset:0; z-index:100;
  background:rgba(0,0,0,.75); backdrop-filter:blur(4px);
  align-items:flex-end; justify-content:center;
}
.modal-bg.open { display:flex; }

.modal {
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--radius) var(--radius) 0 0;
  padding:24px 20px calc(24px + var(--safe-b));
  width:100%; max-width:520px;
  animation: slideUp .3s ease;
}
.modal h3 { font-size:1.1rem; font-weight:700; margin-bottom:4px; }
.modal-sub { font-size:.8rem; color:var(--text-dim); margin-bottom:16px; }

/* ── Toast ─────────────────────────────────────── */
.toast {
  position:fixed; bottom:24px; left:50%;
  transform:translateX(-50%) translateY(80px);
  background:var(--bg-card); border:1px solid var(--gold-mid);
  border-radius:var(--radius-sm); padding:10px 18px;
  font-family:var(--mono); font-size:.72rem; color:var(--gold);
  z-index:200; backdrop-filter:blur(10px);
  max-width:calc(100% - 32px); text-align:center;
  transition:transform .3s ease;
}
.toast.show { transform:translateX(-50%) translateY(0); }

/* ── Confetti ──────────────────────────────────── */
.confetti {
  position:fixed; width:8px; height:8px; border-radius:2px;
  z-index:150; pointer-events:none;
  animation:confFall 1.8s ease-out forwards;
}
@keyframes confFall {
  0%   { transform:translateY(0) rotate(0deg); opacity:1; }
  100% { transform:translateY(100vh) rotate(720deg); opacity:0; }
}

/* ── Responsive ───────────────────────────────── */
@media (min-width:480px) {
  .hero h1 { font-size:2.8rem; }
  .stat-value { font-size:2.2rem; }
  .modal, .raise-inner { border-radius:var(--radius); margin-bottom:10vh; }
  .modal-bg, .raise-sheet.open { align-items:center; }
}

@media (min-width:768px) {
  .app { max-width:680px; }
  .players { grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); }
  .steps-grid { grid-template-columns:repeat(4,1fr); }
}
